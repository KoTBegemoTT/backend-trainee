# Тестовое задание стажёра Backend
Задание выполнил Лебедев Павел
## Стек 
- **Язык сервиса:** python + Django REST framework
- **База данных:** PostgreSQL
- **Деплой:** Docker и Docker Compose.
## Запуск
Перейти в директорию, в которой находится docker-compose.yaml и выполнить:
- docker-compose build
- docker-compose up
## Тесты
Тесты находятся в banerApi/banerApiApp/tests
- Перед запуском нужно поменять в banerApi/banerApi/settings.py DATABASES:
'HOST': 'database' на 'HOST': 'localhost'
- Запустить тесты можно командой python manage.py test

Возможно это поможет при ручном тестировании:  

В docker-compose можно добавить строку "python manage.py loaddata datadump.json &&", перед последней, это загрузит небольшую тестовую базу данных. Для неё можно использовать:
- 9bab6e2e9228d6ace34c9bca2a7493186e9587b5 - токен пользователя
- 695a26b13a074b705757855e3dc499f3a4eb7dab - токен Админа

## Проблемы/Вопросы, возникшие при выполнении задания
**Должно ли при post и put запросах проверяться поле content на соответствие схеме?**

Решил, что должно так как указана конкретная структура(title, text, url). Использовал дополнительный сериалайзер для проверки т.к. не смог объединить это в один.

**Должны ли пользовательский и админский токен чем-то различаться или достаточно принадлежности пользователю с определёнными правами?**

Решил, что пользовательский и админский токен не должны отличаться по структуре, так как передаются они через одинаковое поле в заголовке.

**Как обрабатывать use_last_version в GET запросе на "user_banner/"**

К сожалению не хватило времени на решение этого вопроса. Полагаю, при use_last_version = False, нужно брать данные из кеша, если кешу не больше пяти минут, а в остальных ситуациях делать запрос напрямую в бд. Сейчас все запросы идут напрямую в бд.

**Должен ли бекенд подключаться к сторонней базе данных при деплое или запускать собственную?**

Счёл, что раз в описании задачи не было предоставлено данных для подключения, значит нужно запускать свою базу данных.

**Нужно ли устанавливать продакшен настройки для проекта?**

Решил, не устанавливать, чтобы было проще проверять работоспособность

**Нужно ли заполнять базу данных автоматическими данными при деполе, чтобы было легче протестировать работоспособность?**

Решил не заполнять, по умолчанию, но оставил закомментированную строку, которая это делает.

